"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const utxos_1 = require("src/apis/avm/utxos");
const create_hash_1 = __importDefault(require("create-hash"));
const bintools_1 = __importDefault(require("src/utils/bintools"));
const bn_js_1 = __importDefault(require("bn.js"));
const buffer_1 = require("buffer/");
const outputs_1 = require("src/apis/avm/outputs");
const types_1 = require("src/apis/avm/types");
const ops_1 = require("src/apis/avm/ops");
/**
 * @ignore
 */
const bintools = bintools_1.default.getInstance();
describe('Operations', () => {
    let assetID = "8a5d2d32e68bc50036e4d086044617fe4a0a0296b274999ba568ea92da46d533";
    let assetIDBuff = buffer_1.Buffer.from(assetID, "hex");
    let addrs = [
        bintools.cb58Decode("B6D4v1VtPYLbiUvYXtW4Px8oE9imC2vGW"),
        bintools.cb58Decode("P5wdRuZeaDt28eHMP5S3w9ZdoBfo7wuzF"),
        bintools.cb58Decode("6Y3kysjF9jnHnYkdS9yGAuoHyae2eNmeV")
    ].sort();
    let locktime = new bn_js_1.default(54321);
    let addrpay = [addrs[0], addrs[1]];
    let payload = buffer_1.Buffer.alloc(1024);
    payload.write("All you Trekkies and TV addicts, Don't mean to diss don't mean to bring static.", 0, 1024, "utf8");
    describe('NFTMintOperation', () => {
        test('SelectOperationClass', () => {
            let goodop = new ops_1.NFTMintOperation(0, buffer_1.Buffer.from(""), []);
            let operation = ops_1.SelectOperationClass(goodop.getOperationID());
            expect(operation).toBeInstanceOf(ops_1.NFTMintOperation);
            expect(() => {
                ops_1.SelectOperationClass(99);
            }).toThrow("Error - SelectOperationClass: unknown opid");
        });
        test('comparator', () => {
            let outputOwners = [];
            outputOwners.push(new outputs_1.OutputOwners(addrs, locktime, 1));
            let op1 = new ops_1.NFTMintOperation(1, payload, outputOwners);
            let op2 = new ops_1.NFTMintOperation(2, payload, outputOwners);
            let op3 = new ops_1.NFTMintOperation(0, payload, outputOwners);
            let cmp = ops_1.NFTMintOperation.comparator();
            expect(cmp(op1, op1)).toBe(0);
            expect(cmp(op2, op2)).toBe(0);
            expect(cmp(op3, op3)).toBe(0);
            expect(cmp(op1, op2)).toBe(-1);
            expect(cmp(op1, op3)).toBe(1);
        });
        test('Functionality', () => {
            let outputOwners = [];
            outputOwners.push(new outputs_1.OutputOwners(addrs, locktime, 1));
            let op = new ops_1.NFTMintOperation(0, payload, outputOwners);
            expect(op.getOperationID()).toBe(types_1.AVMConstants.NFTMINTOPID);
            expect(op.getOutputOwners().toString()).toBe(outputOwners.toString());
            let opcopy = new ops_1.NFTMintOperation();
            let opb = op.toBuffer();
            opcopy.fromBuffer(opb);
            expect(opcopy.toString()).toBe(op.toString());
        });
    });
    describe('NFTTransferOperation', () => {
        test('SelectOperationClass', () => {
            let nout = new outputs_1.NFTTransferOutput(1000, payload, addrs, locktime, 1);
            let goodop = new ops_1.NFTTransferOperation(nout);
            let operation = ops_1.SelectOperationClass(goodop.getOperationID());
            expect(operation).toBeInstanceOf(ops_1.NFTTransferOperation);
            expect(() => {
                ops_1.SelectOperationClass(99);
            }).toThrow("Error - SelectOperationClass: unknown opid");
        });
        test('comparator', () => {
            let op1 = new ops_1.NFTTransferOperation(new outputs_1.NFTTransferOutput(1000, payload, addrs, locktime, 1));
            let op2 = new ops_1.NFTTransferOperation(new outputs_1.NFTTransferOutput(1001, payload, addrs, locktime, 1));
            let op3 = new ops_1.NFTTransferOperation(new outputs_1.NFTTransferOutput(999, payload, addrs, locktime, 1));
            let cmp = ops_1.NFTTransferOperation.comparator();
            expect(cmp(op1, op1)).toBe(0);
            expect(cmp(op2, op2)).toBe(0);
            expect(cmp(op3, op3)).toBe(0);
            expect(cmp(op1, op2)).toBe(-1);
            expect(cmp(op1, op3)).toBe(1);
        });
        test('Functionality', () => {
            let nout = new outputs_1.NFTTransferOutput(1000, payload, addrs, locktime, 1);
            let op = new ops_1.NFTTransferOperation(nout);
            expect(op.getOperationID()).toBe(types_1.AVMConstants.NFTXFEROP);
            expect(op.getOutput().toString()).toBe(nout.toString());
            let opcopy = new ops_1.NFTTransferOperation();
            opcopy.fromBuffer(op.toBuffer());
            expect(opcopy.toString()).toBe(op.toString());
            op.addSignatureIdx(0, addrs[0]);
            let sigidx = op.getSigIdxs();
            expect(sigidx[0].getSource().toString("hex")).toBe(addrs[0].toString("hex"));
            opcopy.fromBuffer(op.toBuffer());
            expect(opcopy.toString()).toBe(op.toString());
        });
    });
    test('TransferableOperation', () => {
        let nout = new outputs_1.NFTTransferOutput(1000, payload, addrs, locktime, 1);
        let op = new ops_1.NFTTransferOperation(nout);
        let nfttxid = buffer_1.Buffer.from(create_hash_1.default("sha256").update(bintools.fromBNToBuffer(new bn_js_1.default(1000), 32)).digest());
        let nftoutputidx = buffer_1.Buffer.from(bintools.fromBNToBuffer(new bn_js_1.default(1000), 4));
        let nftutxo = new utxos_1.UTXO(types_1.AVMConstants.LATESTCODEC, nfttxid, nftoutputidx, assetIDBuff, nout);
        let xferop = new ops_1.TransferableOperation(assetIDBuff, [nftutxo.getUTXOID()], op);
        let xferop2 = new ops_1.TransferableOperation(assetIDBuff, [buffer_1.Buffer.concat([nfttxid, nftoutputidx])], op);
        let uid = new types_1.UTXOID();
        uid.fromString(nftutxo.getUTXOID());
        let xferop3 = new ops_1.TransferableOperation(assetIDBuff, [uid], op);
        expect(xferop.getAssetID().toString("hex")).toBe(assetID);
        let utxoiddeserialized = bintools.cb58Decode(xferop.getUTXOIDs()[0].toString());
        expect(bintools.bufferToB58(utxoiddeserialized)).toBe(nftutxo.getUTXOID());
        expect(xferop.getOperation().toString()).toBe(op.toString());
        let opcopy = new ops_1.TransferableOperation();
        opcopy.fromBuffer(xferop.toBuffer());
        expect(opcopy.toString()).toBe(xferop.toString());
        expect(xferop2.toBuffer().toString("hex")).toBe(xferop.toBuffer().toString('hex'));
        expect(xferop3.toBuffer().toString("hex")).toBe(xferop.toBuffer().toString('hex'));
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BzLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi90ZXN0cy9hcGlzL2F2bS9vcHMudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLDhDQUEwQztBQUMxQyw4REFBcUM7QUFDckMsa0VBQTBDO0FBQzFDLGtEQUF1QjtBQUN2QixvQ0FBK0I7QUFDL0Isa0RBQXNFO0FBQ3RFLDhDQUFrRTtBQUNsRSwwQ0FBa0k7QUFHbEk7O0dBRUc7QUFDSCxNQUFNLFFBQVEsR0FBRyxrQkFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBRXhDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO0lBQ3hCLElBQUksT0FBTyxHQUFVLGtFQUFrRSxDQUFDO0lBQ3hGLElBQUksV0FBVyxHQUFVLGVBQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3JELElBQUksS0FBSyxHQUFpQjtRQUN0QixRQUFRLENBQUMsVUFBVSxDQUFDLG1DQUFtQyxDQUFDO1FBQ3hELFFBQVEsQ0FBQyxVQUFVLENBQUMsbUNBQW1DLENBQUM7UUFDeEQsUUFBUSxDQUFDLFVBQVUsQ0FBQyxtQ0FBbUMsQ0FBQztLQUMzRCxDQUFDLElBQUksRUFBRSxDQUFDO0lBRVQsSUFBSSxRQUFRLEdBQU0sSUFBSSxlQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDaEMsSUFBSSxPQUFPLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFbkMsSUFBSSxPQUFPLEdBQVUsZUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN4QyxPQUFPLENBQUMsS0FBSyxDQUFDLGlGQUFpRixFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFFLENBQUM7SUFFbkgsUUFBUSxDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtRQUM5QixJQUFJLENB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QUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO1FBQzNFLE1BQU0sQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFFN0QsSUFBSSxNQUFNLEdBQXlCLElBQUksMkJBQXFCLEVBQUUsQ0FBQztRQUMvRCxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQ3JDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFFbEQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ25GLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUN2RixDQUFDLENBQUMsQ0FBQztBQUVQLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVVRYTyB9IGZyb20gJ3NyYy9hcGlzL2F2bS91dHhvcyc7XG5pbXBvcnQgY3JlYXRlSGFzaCBmcm9tICdjcmVhdGUtaGFzaCc7XG5pbXBvcnQgQmluVG9vbHMgZnJvbSAnc3JjL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCBCTiBmcm9tICdibi5qcyc7XG5pbXBvcnQge0J1ZmZlcn0gZnJvbSBcImJ1ZmZlci9cIjtcbmltcG9ydCB7IE5GVFRyYW5zZmVyT3V0cHV0LCBPdXRwdXRPd25lcnN9IGZyb20gJ3NyYy9hcGlzL2F2bS9vdXRwdXRzJztcbmltcG9ydCB7IFNpZ0lkeCwgVVRYT0lELCBBVk1Db25zdGFudHMgfSBmcm9tICdzcmMvYXBpcy9hdm0vdHlwZXMnO1xuaW1wb3J0IHsgU2VsZWN0T3BlcmF0aW9uQ2xhc3MsIE9wZXJhdGlvbiwgVHJhbnNmZXJhYmxlT3BlcmF0aW9uLCBORlRUcmFuc2Zlck9wZXJhdGlvbiwgTkZUTWludE9wZXJhdGlvbiB9IGZyb20gJ3NyYy9hcGlzL2F2bS9vcHMnO1xuXG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5cbmRlc2NyaWJlKCdPcGVyYXRpb25zJywgKCkgPT4ge1xuICAgIGxldCBhc3NldElEOnN0cmluZyA9IFwiOGE1ZDJkMzJlNjhiYzUwMDM2ZTRkMDg2MDQ0NjE3ZmU0YTBhMDI5NmIyNzQ5OTliYTU2OGVhOTJkYTQ2ZDUzM1wiO1xuICAgIGxldCBhc3NldElEQnVmZjpCdWZmZXIgPSBCdWZmZXIuZnJvbShhc3NldElELCBcImhleFwiKTtcbiAgICBsZXQgYWRkcnM6QXJyYXk8QnVmZmVyPiA9IFtcbiAgICAgICAgYmludG9vbHMuY2I1OERlY29kZShcIkI2RDR2MVZ0UFlMYmlVdllYdFc0UHg4b0U5aW1DMnZHV1wiKSxcbiAgICAgICAgYmludG9vbHMuY2I1OERlY29kZShcIlA1d2RSdVplYUR0MjhlSE1QNVMzdzlaZG9CZm83d3V6RlwiKSxcbiAgICAgICAgYmludG9vbHMuY2I1OERlY29kZShcIjZZM2t5c2pGOWpuSG5Za2RTOXlHQXVvSHlhZTJlTm1lVlwiKVxuICAgIF0uc29ydCgpO1xuXG4gICAgbGV0IGxvY2t0aW1lOkJOID0gbmV3IEJOKDU0MzIxKTtcbiAgICBsZXQgYWRkcnBheSA9IFthZGRyc1swXSwgYWRkcnNbMV1dO1xuXG4gICAgbGV0IHBheWxvYWQ6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDEwMjQpO1xuICAgIHBheWxvYWQud3JpdGUoXCJBbGwgeW91IFRyZWtraWVzIGFuZCBUViBhZGRpY3RzLCBEb24ndCBtZWFuIHRvIGRpc3MgZG9uJ3QgbWVhbiB0byBicmluZyBzdGF0aWMuXCIsIDAsIDEwMjQsIFwidXRmOFwiICk7XG5cbiAgICBkZXNjcmliZSgnTkZUTWludE9wZXJhdGlvbicsICgpID0+IHtcbiAgICAgICAgdGVzdCgnU2VsZWN0T3BlcmF0aW9uQ2xhc3MnLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgZ29vZG9wOk5GVE1pbnRPcGVyYXRpb24gPSBuZXcgTkZUTWludE9wZXJhdGlvbigwLCBCdWZmZXIuZnJvbShcIlwiKSwgW10pO1xuICAgICAgICAgICAgbGV0IG9wZXJhdGlvbjpPcGVyYXRpb24gPSBTZWxlY3RPcGVyYXRpb25DbGFzcyhnb29kb3AuZ2V0T3BlcmF0aW9uSUQoKSk7XG4gICAgICAgICAgICBleHBlY3Qob3BlcmF0aW9uKS50b0JlSW5zdGFuY2VPZihORlRNaW50T3BlcmF0aW9uKTtcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgU2VsZWN0T3BlcmF0aW9uQ2xhc3MoOTkpO1xuICAgICAgICAgICAgfSkudG9UaHJvdyhcIkVycm9yIC0gU2VsZWN0T3BlcmF0aW9uQ2xhc3M6IHVua25vd24gb3BpZFwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnY29tcGFyYXRvcicsICgpID0+IHtcbiAgICAgICAgICAgIGxldCBvdXRwdXRPd25lcnM6QXJyYXk8T3V0cHV0T3duZXJzPiA9IFtdO1xuICAgICAgICAgICAgb3V0cHV0T3duZXJzLnB1c2gobmV3IE91dHB1dE93bmVycyhhZGRycywgbG9ja3RpbWUsIDEpKTtcbiAgICAgICAgICAgIGxldCBvcDE6TkZUTWludE9wZXJhdGlvbiA9IG5ldyBORlRNaW50T3BlcmF0aW9uKDEsIHBheWxvYWQsIG91dHB1dE93bmVycyk7XG4gICAgICAgICAgICBsZXQgb3AyOk5GVE1pbnRPcGVyYXRpb24gPSBuZXcgTkZUTWludE9wZXJhdGlvbigyLCBwYXlsb2FkLCBvdXRwdXRPd25lcnMpO1xuICAgICAgICAgICAgbGV0IG9wMzpORlRNaW50T3BlcmF0aW9uID0gbmV3IE5GVE1pbnRPcGVyYXRpb24oMCwgcGF5bG9hZCwgb3V0cHV0T3duZXJzKTtcbiAgICAgICAgICAgIGxldCBjbXAgPSBORlRNaW50T3BlcmF0aW9uLmNvbXBhcmF0b3IoKTtcbiAgICAgICAgICAgIGV4cGVjdChjbXAob3AxLCBvcDEpKS50b0JlKDApO1xuICAgICAgICAgICAgZXhwZWN0KGNtcChvcDIsIG9wMikpLnRvQmUoMCk7XG4gICAgICAgICAgICBleHBlY3QoY21wKG9wMywgb3AzKSkudG9CZSgwKTtcbiAgICAgICAgICAgIGV4cGVjdChjbXAob3AxLCBvcDIpKS50b0JlKC0xKTtcbiAgICAgICAgICAgIGV4cGVjdChjbXAob3AxLCBvcDMpKS50b0JlKDEpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IG91dHB1dE93bmVyczpBcnJheTxPdXRwdXRPd25lcnM+ID0gW107XG4gICAgICAgICAgICBvdXRwdXRPd25lcnMucHVzaChuZXcgT3V0cHV0T3duZXJzKGFkZHJzLCBsb2NrdGltZSwgMSkpO1xuICAgICAgICAgICAgbGV0IG9wOk5GVE1pbnRPcGVyYXRpb24gPSBuZXcgTkZUTWludE9wZXJhdGlvbigwLCBwYXlsb2FkLCBvdXRwdXRPd25lcnMpO1xuICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChvcC5nZXRPcGVyYXRpb25JRCgpKS50b0JlKEFWTUNvbnN0YW50cy5ORlRNSU5UT1BJRCk7XG4gICAgICAgICAgICBleHBlY3Qob3AuZ2V0T3V0cHV0T3duZXJzKCkudG9TdHJpbmcoKSkudG9CZShvdXRwdXRPd25lcnMudG9TdHJpbmcoKSk7XG4gICAgICAgIFxuICAgICAgICAgICAgbGV0IG9wY29weTpORlRNaW50T3BlcmF0aW9uID0gbmV3IE5GVE1pbnRPcGVyYXRpb24oKTtcbiAgICAgICAgICAgIGxldCBvcGI6QnVmZmVyID0gb3AudG9CdWZmZXIoKTtcbiAgICAgICAgICAgIG9wY29weS5mcm9tQnVmZmVyKG9wYik7XG4gICAgICAgICAgICBleHBlY3Qob3Bjb3B5LnRvU3RyaW5nKCkpLnRvQmUob3AudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pO1xuICAgIH0pXG5cbiAgICBkZXNjcmliZSgnTkZUVHJhbnNmZXJPcGVyYXRpb24nLCAoKSA9PiB7XG4gICAgICAgIHRlc3QoJ1NlbGVjdE9wZXJhdGlvbkNsYXNzJywgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IG5vdXQ6TkZUVHJhbnNmZXJPdXRwdXQgPSBuZXcgTkZUVHJhbnNmZXJPdXRwdXQoMTAwMCwgcGF5bG9hZCwgYWRkcnMsIGxvY2t0aW1lLCAxKTtcbiAgICAgICAgICAgIGxldCBnb29kb3A6TkZUVHJhbnNmZXJPcGVyYXRpb24gPSBuZXcgTkZUVHJhbnNmZXJPcGVyYXRpb24obm91dCk7XG4gICAgICAgICAgICBsZXQgb3BlcmF0aW9uOk9wZXJhdGlvbiA9IFNlbGVjdE9wZXJhdGlvbkNsYXNzKGdvb2RvcC5nZXRPcGVyYXRpb25JRCgpKTtcbiAgICAgICAgICAgIGV4cGVjdChvcGVyYXRpb24pLnRvQmVJbnN0YW5jZU9mKE5GVFRyYW5zZmVyT3BlcmF0aW9uKTtcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgU2VsZWN0T3BlcmF0aW9uQ2xhc3MoOTkpO1xuICAgICAgICAgICAgfSkudG9UaHJvdyhcIkVycm9yIC0gU2VsZWN0T3BlcmF0aW9uQ2xhc3M6IHVua25vd24gb3BpZFwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnY29tcGFyYXRvcicsICgpID0+IHtcbiAgICAgICAgICAgIGxldCBvcDE6TkZUVHJhbnNmZXJPcGVyYXRpb24gPSBuZXcgTkZUVHJhbnNmZXJPcGVyYXRpb24obmV3IE5GVFRyYW5zZmVyT3V0cHV0KDEwMDAsIHBheWxvYWQsIGFkZHJzLCBsb2NrdGltZSwgMSkpO1xuICAgICAgICAgICAgbGV0IG9wMjpORlRUcmFuc2Zlck9wZXJhdGlvbiA9IG5ldyBORlRUcmFuc2Zlck9wZXJhdGlvbihuZXcgTkZUVHJhbnNmZXJPdXRwdXQoMTAwMSwgcGF5bG9hZCwgYWRkcnMsIGxvY2t0aW1lLCAxKSk7XG4gICAgICAgICAgICBsZXQgb3AzOk5GVFRyYW5zZmVyT3BlcmF0aW9uID0gbmV3IE5GVFRyYW5zZmVyT3BlcmF0aW9uKG5ldyBORlRUcmFuc2Zlck91dHB1dCg5OTksIHBheWxvYWQsIGFkZHJzLCBsb2NrdGltZSwgMSkpO1xuICAgICAgICAgICAgbGV0IGNtcCA9IE5GVFRyYW5zZmVyT3BlcmF0aW9uLmNvbXBhcmF0b3IoKTtcbiAgICAgICAgICAgIGV4cGVjdChjbXAob3AxLCBvcDEpKS50b0JlKDApO1xuICAgICAgICAgICAgZXhwZWN0KGNtcChvcDIsIG9wMikpLnRvQmUoMCk7XG4gICAgICAgICAgICBleHBlY3QoY21wKG9wMywgb3AzKSkudG9CZSgwKTtcbiAgICAgICAgICAgIGV4cGVjdChjbXAob3AxLCBvcDIpKS50b0JlKC0xKTtcbiAgICAgICAgICAgIGV4cGVjdChjbXAob3AxLCBvcDMpKS50b0JlKDEpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IG5vdXQ6TkZUVHJhbnNmZXJPdXRwdXQgPSBuZXcgTkZUVHJhbnNmZXJPdXRwdXQoMTAwMCwgcGF5bG9hZCwgYWRkcnMsIGxvY2t0aW1lLCAxKTtcbiAgICAgICAgICAgIGxldCBvcDpORlRUcmFuc2Zlck9wZXJhdGlvbiA9IG5ldyBORlRUcmFuc2Zlck9wZXJhdGlvbihub3V0KTtcbiAgICAgICAgXG4gICAgICAgICAgICBleHBlY3Qob3AuZ2V0T3BlcmF0aW9uSUQoKSkudG9CZShBVk1Db25zdGFudHMuTkZUWEZFUk9QKTtcbiAgICAgICAgICAgIGV4cGVjdChvcC5nZXRPdXRwdXQoKS50b1N0cmluZygpKS50b0JlKG5vdXQudG9TdHJpbmcoKSk7XG4gICAgICAgIFxuICAgICAgICAgICAgbGV0IG9wY29weTpORlRUcmFuc2Zlck9wZXJhdGlvbiA9IG5ldyBORlRUcmFuc2Zlck9wZXJhdGlvbigpO1xuICAgICAgICAgICAgb3Bjb3B5LmZyb21CdWZmZXIob3AudG9CdWZmZXIoKSk7XG4gICAgICAgICAgICBleHBlY3Qob3Bjb3B5LnRvU3RyaW5nKCkpLnRvQmUob3AudG9TdHJpbmcoKSk7XG4gICAgICAgIFxuICAgICAgICAgICAgb3AuYWRkU2lnbmF0dXJlSWR4KDAsIGFkZHJzWzBdKTtcbiAgICAgICAgICAgIGxldCBzaWdpZHg6QXJyYXk8U2lnSWR4PiA9IG9wLmdldFNpZ0lkeHMoKTtcbiAgICAgICAgICAgIGV4cGVjdChzaWdpZHhbMF0uZ2V0U291cmNlKCkudG9TdHJpbmcoXCJoZXhcIikpLnRvQmUoYWRkcnNbMF0udG9TdHJpbmcoXCJoZXhcIikpO1xuICAgICAgICAgICAgb3Bjb3B5LmZyb21CdWZmZXIob3AudG9CdWZmZXIoKSk7XG4gICAgICAgICAgICBleHBlY3Qob3Bjb3B5LnRvU3RyaW5nKCkpLnRvQmUob3AudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pO1xuICAgIH0pXG5cblxuICAgIHRlc3QoJ1RyYW5zZmVyYWJsZU9wZXJhdGlvbicsICgpID0+IHtcbiAgICAgICAgbGV0IG5vdXQ6TkZUVHJhbnNmZXJPdXRwdXQgPSBuZXcgTkZUVHJhbnNmZXJPdXRwdXQoMTAwMCwgcGF5bG9hZCwgYWRkcnMsIGxvY2t0aW1lLCAxKTtcbiAgICAgICAgbGV0IG9wOk5GVFRyYW5zZmVyT3BlcmF0aW9uID0gbmV3IE5GVFRyYW5zZmVyT3BlcmF0aW9uKG5vdXQpO1xuICAgICAgICBsZXQgbmZ0dHhpZDpCdWZmZXIgPSBCdWZmZXIuZnJvbShjcmVhdGVIYXNoKFwic2hhMjU2XCIpLnVwZGF0ZShiaW50b29scy5mcm9tQk5Ub0J1ZmZlcihuZXcgQk4oMTAwMCksIDMyKSkuZGlnZXN0KCkpO1xuICAgICAgICBsZXQgbmZ0b3V0cHV0aWR4OkJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJpbnRvb2xzLmZyb21CTlRvQnVmZmVyKG5ldyBCTigxMDAwKSwgNCkpO1xuICAgICAgICBsZXQgbmZ0dXR4bzpVVFhPID0gbmV3IFVUWE8oQVZNQ29uc3RhbnRzLkxBVEVTVENPREVDLCBuZnR0eGlkLCBuZnRvdXRwdXRpZHgsIGFzc2V0SURCdWZmLCBub3V0KTtcbiAgICAgICAgbGV0IHhmZXJvcDpUcmFuc2ZlcmFibGVPcGVyYXRpb24gPSBuZXcgVHJhbnNmZXJhYmxlT3BlcmF0aW9uKGFzc2V0SURCdWZmLCBbbmZ0dXR4by5nZXRVVFhPSUQoKV0sIG9wKTtcblxuICAgICAgICBsZXQgeGZlcm9wMjpUcmFuc2ZlcmFibGVPcGVyYXRpb24gPSBuZXcgVHJhbnNmZXJhYmxlT3BlcmF0aW9uKGFzc2V0SURCdWZmLCBbQnVmZmVyLmNvbmNhdChbbmZ0dHhpZCwgbmZ0b3V0cHV0aWR4XSldLCBvcCk7IFxuICAgICAgICBsZXQgdWlkOlVUWE9JRCA9IG5ldyBVVFhPSUQoKTtcbiAgICAgICAgdWlkLmZyb21TdHJpbmcobmZ0dXR4by5nZXRVVFhPSUQoKSk7XG4gICAgICAgIGxldCB4ZmVyb3AzOlRyYW5zZmVyYWJsZU9wZXJhdGlvbiA9IG5ldyBUcmFuc2ZlcmFibGVPcGVyYXRpb24oYXNzZXRJREJ1ZmYsIFt1aWRdLCBvcCk7XG5cbiAgICAgICAgZXhwZWN0KHhmZXJvcC5nZXRBc3NldElEKCkudG9TdHJpbmcoXCJoZXhcIikpLnRvQmUoYXNzZXRJRCk7XG4gICAgICAgIGxldCB1dHhvaWRkZXNlcmlhbGl6ZWQ6QnVmZmVyID0gYmludG9vbHMuY2I1OERlY29kZSh4ZmVyb3AuZ2V0VVRYT0lEcygpWzBdLnRvU3RyaW5nKCkpO1xuICAgICAgICBleHBlY3QoYmludG9vbHMuYnVmZmVyVG9CNTgodXR4b2lkZGVzZXJpYWxpemVkKSkudG9CZShuZnR1dHhvLmdldFVUWE9JRCgpKTtcbiAgICAgICAgZXhwZWN0KHhmZXJvcC5nZXRPcGVyYXRpb24oKS50b1N0cmluZygpKS50b0JlKG9wLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIGxldCBvcGNvcHk6VHJhbnNmZXJhYmxlT3BlcmF0aW9uID0gbmV3IFRyYW5zZmVyYWJsZU9wZXJhdGlvbigpO1xuICAgICAgICBvcGNvcHkuZnJvbUJ1ZmZlcih4ZmVyb3AudG9CdWZmZXIoKSk7XG4gICAgICAgIGV4cGVjdChvcGNvcHkudG9TdHJpbmcoKSkudG9CZSh4ZmVyb3AudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgZXhwZWN0KHhmZXJvcDIudG9CdWZmZXIoKS50b1N0cmluZyhcImhleFwiKSkudG9CZSh4ZmVyb3AudG9CdWZmZXIoKS50b1N0cmluZygnaGV4JykpO1xuICAgICAgICBleHBlY3QoeGZlcm9wMy50b0J1ZmZlcigpLnRvU3RyaW5nKFwiaGV4XCIpKS50b0JlKHhmZXJvcC50b0J1ZmZlcigpLnRvU3RyaW5nKCdoZXgnKSk7XG4gICAgfSk7XG5cbn0pOyJdfQ==